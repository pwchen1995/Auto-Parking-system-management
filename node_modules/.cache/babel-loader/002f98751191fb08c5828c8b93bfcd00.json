{"ast":null,"code":"var _jsxFileName = \"/Users/kevinchen/Desktop/WSU_Spring2021/Software Quality/project/ia5-pwchen1995/src/components/Reservations.js\";\n//Rounds -- A parent component for the app's \"rounds\" mode.\n//Manages the rounds data for the current user and conditionally renders the\n//appropriate rounds mode page based on App's mode, which is passed in as a prop.\nimport React from 'react';\nimport AppMode from '../AppMode.js';\nimport ReservationsTable from './ReservationsTable.js';\nimport ReservationForm from './ReservationForm.js';\nimport FloatingButton from './FloatingButton.js';\n\nclass Reservations extends React.Component {\n  //Initialize a Rounds object based on local storage\n  constructor(props) {\n    super(props);\n\n    this.addRound = newData => {\n      let data = JSON.parse(localStorage.getItem(this.props.userId));\n      data.ress[++data.resCount] = newData;\n      localStorage.setItem(this.props.userId, JSON.stringify(data));\n      this.setState({\n        ress: data.ress,\n        resCount: data.resCount\n      });\n      this.props.changeMode(AppMode.RESERVATIONS);\n    };\n\n    this.editRound = newData => {\n      let data = JSON.parse(localStorage.getItem(this.props.userId));\n      data.ress[this.state.editId] = newData;\n      localStorage.setItem(this.props.userId, JSON.stringify(data));\n      this.setState({\n        ress: data.ress,\n        editId: \"\"\n      });\n      this.props.changeMode(AppMode.RESERVATIONS);\n    };\n\n    this.deleteRound = () => {\n      let data = JSON.parse(localStorage.getItem(this.props.userId));\n      delete data.ress[this.state.deleteId];\n      localStorage.setItem(this.props.userId, JSON.stringify(data));\n      this.setState({\n        ress: data.ress,\n        deleteId: \"\"\n      });\n    };\n\n    this.setDeleteId = val => {\n      this.setState({\n        deleteId: val\n      });\n    };\n\n    this.setEditId = val => {\n      this.setState({\n        editId: val\n      });\n    };\n\n    let _data = JSON.parse(localStorage.getItem(this.props.userId));\n\n    if (_data == null) {\n      //no data yet for this user -- create empty record\n      _data = {\n        ress: {},\n        resCount: 0\n      };\n      localStorage.setItem(this.props.userId, JSON.stringify(_data));\n    }\n\n    this.state = {\n      ress: _data.ress,\n      resCount: _data.resCount,\n      deleteId: \"\",\n      editId: \"\",\n      showConfirmDelete: false,\n      menuOpened: this.props.menuOpened\n    };\n  } //addRound -- Given an object newData containing a new round, add the round\n  //to the current user's list of rounds, incremeting roundCount to ensure\n  //the round id is unique. Then commit to local storage and toggle\n  //the mode back to AppMode.ROUNDS since the user is done adding a round.\n\n\n  //render -- Conditionally render the Rounds mode page as either the rounds\n  //table, the rounds form set to obtain a new round, or the rounds form set\n  //to edit an existing round.\n  render() {\n    // alert(this.props.showExit);\n    switch (this.props.mode) {\n      case AppMode.RESERVATIONS:\n        return React.createElement(React.Fragment, null, React.createElement(ReservationsTable, {\n          rounds: this.state.rounds,\n          setEditId: this.setEditId,\n          setDeleteId: this.setDeleteId,\n          deleteRound: this.deleteRound,\n          changeMode: this.props.changeMode,\n          menuOpen: this.props.menuOpen,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }), React.createElement(FloatingButton, {\n          handleClick: () => this.props.changeMode(AppMode.RESERVATIONS_LOGRESERVATION),\n          menuOpen: this.props.menuOpen,\n          icon: \"fa fa-plus\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }));\n\n      case AppMode.RESERVATIONS_LOGRESERVATION:\n        return React.createElement(ReservationForm, {\n          mode: this.props.mode,\n          startData: \"\",\n          saveRound: this.addRound,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        });\n\n      case AppMode.RESERVATIONS_EDITRESERVATION:\n        return React.createElement(ReservationForm, {\n          mode: this.props.mode,\n          startData: this.state.rounds[this.state.editId],\n          saveRound: this.editRound,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        });\n    }\n  }\n\n}\n\nexport default Reservations;","map":{"version":3,"sources":["/Users/kevinchen/Desktop/WSU_Spring2021/Software Quality/project/ia5-pwchen1995/src/components/Reservations.js"],"names":["React","AppMode","ReservationsTable","ReservationForm","FloatingButton","Reservations","Component","constructor","props","addRound","newData","data","JSON","parse","localStorage","getItem","userId","ress","resCount","setItem","stringify","setState","changeMode","RESERVATIONS","editRound","state","editId","deleteRound","deleteId","setDeleteId","val","setEditId","showConfirmDelete","menuOpened","render","mode","rounds","menuOpen","RESERVATIONS_LOGRESERVATION","RESERVATIONS_EDITRESERVATION"],"mappings":"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","sourcesContent":["//Rounds -- A parent component for the app's \"rounds\" mode.\n//Manages the rounds data for the current user and conditionally renders the\n//appropriate rounds mode page based on App's mode, which is passed in as a prop.\n\nimport React from 'react';\nimport AppMode from '../AppMode.js';\nimport ReservationsTable from './ReservationsTable.js';\nimport ReservationForm from './ReservationForm.js';\nimport FloatingButton from './FloatingButton.js';\n\nclass Reservations extends React.Component {\n\n    //Initialize a Rounds object based on local storage\n    constructor(props) {\n            super(props);\n            let data = JSON.parse(localStorage.getItem(this.props.userId)); \n            if (data == null) { //no data yet for this user -- create empty record\n                data = {ress: {},\n                        resCount: 0};  \n                localStorage.setItem(this.props.userId,JSON.stringify(data));\n            }\n            this.state = {ress: data.ress,\n                          resCount: data.resCount,\n                          deleteId: \"\",\n                          editId: \"\",\n                          showConfirmDelete: false,\n                          menuOpened: this.props.menuOpened};           \n        }\n\n    //addRound -- Given an object newData containing a new round, add the round\n    //to the current user's list of rounds, incremeting roundCount to ensure\n    //the round id is unique. Then commit to local storage and toggle\n    //the mode back to AppMode.ROUNDS since the user is done adding a round.\n    addRound = (newData) => {\n        let data = JSON.parse(localStorage.getItem(this.props.userId));\n        data.ress[++data.resCount] = newData;\n        localStorage.setItem(this.props.userId, JSON.stringify(data));\n        this.setState({ress: data.ress, resCount: data.resCount});\n        this.props.changeMode(AppMode.RESERVATIONS);\n    }\n\n    //editRound -- Given an object newData containing updated data on an\n    //existing round, update the current user's round uniquely identified by\n    //this.state.editId, commit to local storage, reset editId to empty and\n    //toggle the mode back to AppMode.ROUNDS since the user is done editing the\n    //round. \n    editRound = (newData) => {\n        let data = JSON.parse(localStorage.getItem(this.props.userId)); \n        data.ress[this.state.editId] = newData;\n        localStorage.setItem(this.props.userId, JSON.stringify(data));\n        this.setState({ress: data.ress, editId: \"\"});\n        this.props.changeMode(AppMode.RESERVATIONS);\n    }\n\n    //deleteRound -- Delete the current user's round uniquely identified by\n    //this.state.deleteId, commit to local storage, and reset deleteId to empty.\n    deleteRound = () => {\n        let data = JSON.parse(localStorage.getItem(this.props.userId));\n        delete data.ress[this.state.deleteId];\n        localStorage.setItem(this.props.userId,JSON.stringify(data));\n        this.setState({ress: data.ress, deleteId: \"\"});\n    }  \n\n    //setDeleteId -- Capture in this.state.deleteId the unique id of the item\n    //the user is considering deleting.\n    setDeleteId = (val) => {\n        this.setState({deleteId: val});\n    }\n\n    //setEditId -- Capture in this.state.editId the unique id of the item\n    //the user is considering editing.\n    setEditId = (val) => {\n        this.setState({editId: val});\n    }\n    \n    //render -- Conditionally render the Rounds mode page as either the rounds\n    //table, the rounds form set to obtain a new round, or the rounds form set\n    //to edit an existing round.\n    render() {\n        // alert(this.props.showExit);\n        switch(this.props.mode) {\n            case AppMode.RESERVATIONS:\n                return (\n                    <>\n                    <ReservationsTable \n                    rounds={this.state.rounds}\n                    setEditId={this.setEditId}\n                    setDeleteId={this.setDeleteId}\n                    deleteRound={this.deleteRound}\n                    changeMode={this.props.changeMode}\n                    menuOpen={this.props.menuOpen} /> \n                    <FloatingButton\n                        handleClick={() => \n                        this.props.changeMode(AppMode.RESERVATIONS_LOGRESERVATION)}\n                        menuOpen={this.props.menuOpen}\n                        icon={\"fa fa-plus\"} />\n                    </>\n                );\n            case AppMode.RESERVATIONS_LOGRESERVATION:\n                return (\n                    <ReservationForm\n                        mode={this.props.mode}\n                        startData={\"\"} \n                        saveRound={this.addRound} />\n                );\n            case AppMode.RESERVATIONS_EDITRESERVATION:\n                return (\n                    <ReservationForm\n                        mode={this.props.mode}\n                        startData={this.state.rounds[this.state.editId]} \n                        saveRound={this.editRound} />\n                );\n        }\n    }\n\n}   \n\nexport default Reservations;\n"]},"metadata":{},"sourceType":"module"}